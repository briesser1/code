
## Entity 1: Measure (Core Specification)

### Identity & Classification

| Field | Type | Description | Example Values |
|---|---|---|---|
| `measure_id` | text (unique) | Org-assigned identifier | `ORG-PM-001` |
| `measure_title` | text | Full descriptive name | "Timely Completion of Annual Case Reviews" |
| `measure_short_name` | text | Abbreviated name for dashboards | "Case Review Timeliness" |
| `measure_version` | text | Version of the specification | `1.0`, `2.1` |
| `measure_status` | enum | Lifecycle status | `draft`, `pilot`, `active`, `under_review`, `retired` |
| `effective_date` | date | Date specification becomes active | 2026-01-01 |
| `retirement_date` | date (nullable) | Date measure is/was retired | null |

### Strategic Alignment

| Field | Type | Description | Example Values |
|---|---|---|---|
| `strategic_domain` | text | High-level category or BSC perspective | "Service Quality", "Workforce", "Financial Stewardship", "Compliance" |
| `strategic_objective` | text | The organizational goal this measure supports | "Improve timeliness of services to families" |
| `measure_type` | enum | What the measure captures | `outcome`, `process`, `structure`, `balancing` |
| `priority_level` | enum | Organizational priority tier | `critical`, `important`, `monitoring` |

### Scoring & Directionality

| Field | Type | Description | Example Values |
|---|---|---|---|
| `scoring_type` | enum | How the result is computed | `proportion`, `ratio`, `continuous_variable`, `cohort`, `composite` |
| `desired_direction` | enum | Which way is "better" | `increase`, `decrease`, `target_range` |
| `unit_of_measure` | text | Unit for the result value | "percent", "days", "count", "rate per 1000" |

**Scoring type definitions** (adapted from eCQM conventions):

- **Proportion** — numerator / denominator where numerator ⊆ denominator (e.g., % of cases reviewed on time)
- **Ratio** — numerator / denominator where numerator is NOT necessarily a subset of the denominator (e.g., staff-to-client ratio)
- **Continuous variable** — a calculation over a population that produces a value like a mean, median, or aggregate (e.g., average days to close a case)
- **Cohort** — identifies a group meeting certain criteria without computing a rate (e.g., list of clients eligible for a program)
- **Composite** — a weighted or combined score from multiple sub-measures

### Population Definitions

These fields define *who or what* is being measured. For proportion and ratio measures, this maps directly to the eCQM population model. For non-proportion measures, use whichever fields apply.

| Field | Type | Description |
|---|---|---|
| `target_population` | text | Plain-language description of the universe being measured |
| `initial_population` | text | The broadest group from which the measure draws — equivalent to the "starting universe" |
| `denominator` | text | The subset of the initial population eligible for the measure (for proportion/ratio) |
| `denominator_exclusions` | text (nullable) | Cases removed from the denominator for clinical, administrative, or policy reasons |
| `denominator_exceptions` | text (nullable) | Cases with acceptable reasons for not meeting numerator criteria |
| `numerator` | text | The subset of the denominator that meets the desired condition |
| `numerator_exclusions` | text (nullable) | Cases to remove from the numerator count |

> **Tip:** Even for continuous variable measures, defining an "initial population" and "measure population" in plain language helps clarify scope. You don't need to force every measure into a strict numerator/denominator frame.

### Calculation Logic

This is the "CQL-lite" section — enough rigor to be unambiguous but written in structured natural language rather than formal CQL.

| Field | Type | Description |
|---|---|---|
| `calculation_narrative` | long text | Plain-language step-by-step description of how to compute the measure from raw data. Should be precise enough that two analysts would produce the same result independently. |
| `calculation_formula` | text | Compact formula representation (optional but recommended) |
| `aggregation_method` | enum | How individual observations roll up | 
| `risk_adjustment` | text (nullable) | Description of any risk adjustment or stratification applied |

**`aggregation_method` values:** `count`, `sum`, `mean`, `median`, `proportion`, `weighted_average`, `min`, `max`, `percentile`

**Example `calculation_narrative`:**

> **Step 1:** Identify all cases assigned to the organization that were open at any point during the measurement period.
> 
> **Step 2 (Denominator):** From Step 1, include only cases where an annual review was due during the measurement period. A review is "due" if the most recent completed review is ≥ 335 days prior to the end of the measurement period, OR the case was opened ≥ 335 days ago and has never had a review.
> 
> **Step 3 (Denominator Exclusions):** Exclude cases transferred out of the organization before their review due date.
> 
> **Step 4 (Numerator):** From the denominator, count cases where the annual review was completed within 30 days of the due date.
> 
> **Result:** Numerator / Denominator, expressed as a percentage.

**Example `calculation_formula`:**

```
(Count of cases with timely review) / (Count of cases with review due) × 100
```

### Targets & Benchmarks

| Field | Type | Description | Example Values |
|---|---|---|---|
| `target_value` | numeric | The performance target | 95.0 |
| `target_type` | enum | How to interpret the target | `minimum_threshold`, `stretch_goal`, `benchmark`, `regulatory_requirement` |
| `baseline_value` | numeric (nullable) | Starting performance when measure was established | 78.5 |
| `baseline_period` | text (nullable) | Time period for baseline | "FY2025 Q1" |
| `benchmark_value` | numeric (nullable) | External or peer benchmark | 90.0 |
| `benchmark_source` | text (nullable) | Where the benchmark comes from | "National average per XYZ report, 2025" |
| `performance_threshold_red` | numeric (nullable) | Below this = critical concern | 70.0 |
| `performance_threshold_yellow` | numeric (nullable) | Below this = caution | 85.0 |

### Reporting Configuration

| Field | Type | Description | Example Values |
|---|---|---|---|
| `measurement_period_type` | enum | Cadence of data collection | `monthly`, `quarterly`, `semi_annual`, `annual`, `rolling_12_month` |
| `measurement_period_duration` | text | How long each measurement window is | "Calendar quarter", "Rolling 12 months" |
| `reporting_frequency` | enum | How often results are reported | `monthly`, `quarterly`, `annual` |
| `reporting_lag_days` | integer | Expected delay between period end and data availability | 45 |
| `reporting_audience` | text | Who receives the results | "Board of Directors, Program Leadership" |

### Stewardship & Governance

| Field | Type | Description | Example Values |
|---|---|---|---|
| `measure_owner` | text | Person accountable for the measure's performance | "Director of Quality" |
| `measure_developer` | text | Person/team who specified the measure | "Analytics Team" |
| `data_steward` | text | Person responsible for data quality | "Data Analyst, Research Dept" |
| `approved_by` | text (nullable) | Who approved the specification | "Quality Committee" |
| `approved_date` | date (nullable) | When it was approved | 2026-01-15 |
| `next_review_date` | date | When the spec is next due for review | 2027-01-15 |
| `change_log` | long text | History of specification changes | "v1.0 - Initial. v1.1 - Revised exclusion criteria per committee feedback." |

### Contextual Metadata

| Field | Type | Description | Example Values |
|---|---|---|---|
| `measure_description` | long text | Brief narrative description of what the measure captures and why it matters | |
| `measure_rationale` | long text | Why this measure was chosen — the business or policy case | |
| `measure_guidance` | long text (nullable) | Implementation notes, known edge cases, analyst tips | |
| `references` | text (nullable) | Citations to regulations, standards, or literature | "45 CFR 1355.44(b)(2)" |
| `related_measures` | text (nullable) | IDs of measures that are related or should be interpreted together | "ORG-PM-003, ORG-PM-017" |
| `stratifications` | text (nullable) | Dimensions by which the measure should be broken out | "Region, program type, worker caseload tier" |

---

## Entity 2: Data Element (One-to-Many with Measure)

Each measure depends on one or more data elements. This table captures what data is needed, where it comes from, and how it maps into the calculation.

| Field | Type | Description | Example Values |
|---|---|---|---|
| `data_element_id` | text (unique) | Element identifier | `DE-042` |
| `measure_id` | text (FK) | Which measure uses this element | `ORG-PM-001` |
| `element_name` | text | Human-readable name | "Case Review Completion Date" |
| `element_description` | text | What this data element represents | "The date the annual case review was completed and signed by the supervisor" |
| `data_type` | enum | Type of value | `date`, `datetime`, `integer`, `decimal`, `boolean`, `text`, `coded_value` |
| `value_set` | text (nullable) | If coded, the valid values | "Pending, Complete, Waived" |
| `data_source_system` | text | System of record | "Case Management System (CMS)", "HRIS", "Financial System" |
| `data_source_table_or_field` | text (nullable) | Specific table/field if known | "tbl_reviews.completion_date" |
| `collection_method` | enum | How data enters the system | `automated_extract`, `manual_entry`, `calculated`, `imported` |
| `data_quality_notes` | text (nullable) | Known quality issues or caveats | "Completion date is sometimes backdated; validate against supervisor sign-off timestamp" |
| `role_in_calculation` | enum | How this element is used | `population_filter`, `numerator_criteria`, `denominator_criteria`, `exclusion_criteria`, `measured_value`, `stratifier`, `risk_adjuster` |
| `required` | boolean | Is this element essential or supplemental | true |
| `responsible_party` | text (nullable) | Who is responsible for data entry or extraction | "Case workers via CMS" |

---

## Entity 3: Measure Result Log (Optional, for tracking over time)

If you want the system to also hold periodic results (moving beyond pure specification into a scorecard), consider this companion table.

| Field | Type | Description | Example Values |
|---|---|---|---|
| `result_id` | auto-increment | Unique result record | 1042 |
| `measure_id` | text (FK) | Which measure | `ORG-PM-001` |
| `measurement_period` | text | The period this result covers | "2026-Q1" |
| `period_start_date` | date | Start of measurement window | 2026-01-01 |
| `period_end_date` | date | End of measurement window | 2026-03-31 |
| `numerator_value` | numeric (nullable) | Numerator count | 187 |
| `denominator_value` | numeric (nullable) | Denominator count | 205 |
| `result_value` | numeric | Computed measure result | 91.2 |
| `performance_status` | enum | RAG status relative to targets | `green`, `yellow`, `red`, `not_applicable` |
| `stratification_key` | text (nullable) | If stratified, which subgroup | "Region: East" |
| `data_completeness_pct` | numeric (nullable) | % of expected data that was available | 98.5 |
| `analyst_notes` | long text (nullable) | Contextual notes for this period | "Spike due to backlog clearance from prior quarter" |
| `reported_date` | date | When result was finalized | 2026-05-15 |
| `reported_by` | text | Who produced the result | "J. Smith" |

---

## Enumeration Reference

For quick implementation, here are the controlled vocabularies referenced above:

| Field | Valid Values |
|---|---|
| `measure_status` | `draft`, `pilot`, `active`, `under_review`, `retired` |
| `measure_type` | `outcome`, `process`, `structure`, `balancing` |
| `scoring_type` | `proportion`, `ratio`, `continuous_variable`, `cohort`, `composite` |
| `desired_direction` | `increase`, `decrease`, `target_range` |
| `target_type` | `minimum_threshold`, `stretch_goal`, `benchmark`, `regulatory_requirement` |
| `measurement_period_type` | `monthly`, `quarterly`, `semi_annual`, `annual`, `rolling_12_month` |
| `reporting_frequency` | `monthly`, `quarterly`, `semi_annual`, `annual` |
| `aggregation_method` | `count`, `sum`, `mean`, `median`, `proportion`, `weighted_average`, `min`, `max`, `percentile` |
| `data_type` (element) | `date`, `datetime`, `integer`, `decimal`, `boolean`, `text`, `coded_value` |
| `collection_method` | `automated_extract`, `manual_entry`, `calculated`, `imported` |
| `role_in_calculation` | `population_filter`, `numerator_criteria`, `denominator_criteria`, `exclusion_criteria`, `measured_value`, `stratifier`, `risk_adjuster` |
| `performance_status` | `green`, `yellow`, `red`, `not_applicable` |
| `priority_level` | `critical`, `important`, `monitoring` |

---
